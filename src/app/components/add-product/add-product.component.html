<section class="container" [@slideInLeft]>
  <div class="header">
    <div class="icon-back">
      <span routerLink="/home/importWarehouse" nz-icon nzType="left" nzTheme="outline"></span>
    </div>
    <div class="title">
      <span class="title-text">Thêm sản phẩm</span>
    </div>
  </div>
  <section class="dflex" style="margin-top: 8vw;">
    <div nz-col nzSpan="10">
      <nz-upload nzName="avatar" nzAction="https://660d2bd96ddfa2943b33731c.mockapi.io/api/upload"
        nzListType="picture-card" [(nzFileList)]="fileList" [nzShowButton]="fileList.length < 1"
        [nzPreview]="handlePreview" style="display: flex; margin-top: 0px;">
        <div>
          <span class="upload_icon" nz-icon nzType="camera" nzTheme="fill"></span>
        </div>
        <nz-modal [nzVisible]="previewVisible" [nzContent]="modalContent" [nzFooter]="null"
          (nzOnCancel)="previewVisible = false">
          <ng-template #modalContent>
            <img [src]="previewImage" [ngStyle]="{ width: '100%' }" />
          </ng-template>
        </nz-modal>
      </nz-upload>
    </div>
    <div nz-col nzSpan="14" class="center">
      <form nz-form [formGroup]="validateAddProductForm">
        <nz-form-item>
          <nz-form-control [nzSpan]="24" class="margin-tb-quantity">
            <nz-input-group [nzPrefix]="prefixTemplateCodeProduct">
              <input class="input" nz-input formControlName="codeProduct" placeholder="Mã sản phẩm" readonly />
            </nz-input-group>
            <ng-template #prefixTemplateCodeProduct let-control>Mã:</ng-template>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control [nzSpan]="24" [nzErrorTip]="floorPriceValidate" class="margin-tb-quantity">
            <nz-input-group [nzPrefix]="prefixTemplate">
              <input class="input" type="number" nz-input formControlName="floorPrice" width="100px" />
            </nz-input-group>
            <ng-template #prefixTemplate>Giá sàn:</ng-template>
            <ng-template #floorPriceValidate let-control>
              @if (control.errors?.['required']) {
              Vui lòng nhập giá sàn!
              }
              @if (control.errors?.['confirm']) {
              Giá sàn phải lớn hơn 0!
              }
            </ng-template>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control [nzSpan]="24" [nzErrorTip]="quantityValidator" class="margin-tb-quantity">
            <nz-input-group [nzPrefix]="prefixTemplateQuantity">
              <input class="input" type="number" nz-input formControlName="quantityProduct" />
            </nz-input-group>
            <ng-template #prefixTemplateQuantity>
              Số lượng tồn:
            </ng-template>
            <ng-template #quantityValidator let-control>
              @if (control.errors?.['required']) {
              Vui lòng nhập số lượng tồn!
              }
              @if (control.errors?.['confirm']) {
              Số lượng tồn phải lớn hơn 0 và bé hơn 10000!
              }
            </ng-template>
          </nz-form-control>
        </nz-form-item>
      </form>
      <div class="button">
        <button class="button-upload" (click)="handleMaintain()">Tải ảnh</button>
        <button class="button-camera" (click)="handleMaintain()">Chụp ảnh</button>
      </div>
    </div>
  </section>
  <section class="container">
    <div>
      <form nz-form [formGroup]="validateAddProductForm">
        <div nz-col [nzSpan]="24" class="margin-tb">
          <nz-form-item>
            <nz-form-control [nzSpan]="24" [nzErrorTip]="nameProductValidate">
              <nz-input-group>
                <input class="input" type="text" nz-input formControlName="nameProduct" placeholder="Tên SP: (*)" />
              </nz-input-group>
              <ng-template #nameProductValidate let-control>
                @if (control.errors?.['required']) {
                Vui lòng nhập tên sản phẩm!
                }
                @if (control.errors?.['confirm']) {
                Tên sản phẩm không được dưới 3 hoặc vượt quá 255 ký tự!
                }
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-col [nzSpan]="24" class="margin-tb">
          <div nz-row style="display: flex; justify-content: space-between;">
            <nz-form-item nz-col [nzSpan]="9">
              <nz-form-control [nzErrorTip]="unitValidate">
                <nz-input-group>
                  <input class="input" type="text" nz-input formControlName="unit" placeholder="Đơn vị tính: (*)" />
                </nz-input-group>
                <ng-template #unitValidate let-control>
                  @if (control.errors?.['required']) {
                  Vui lòng nhập đơn vị!
                  }
                  @if (control.errors?.['confirm']) {
                  Đơn vị tính không được dưới 3 hoặc vượt quá 255 ký tự!
                  }
                </ng-template>
              </nz-form-control>
            </nz-form-item>
            <nz-form-item nz-col [nzSpan]="7">
              <nz-form-control [nzErrorTip]="expiredDateValidate">
                <nz-input-group>
                  <input type="text" class="input" nz-input formControlName="expiredDate" placeholder="HSD:" />
                </nz-input-group>
                <ng-template #expiredDateValidate let-control>
                  @if (control.errors?.['required']) {
                  Vui lòng nhập hạn sử dụng!
                  }
                  @if (control.errors?.['confirm']) {
                  Hạn sử dụng không được dưới 3 hoặc vượt quá 255 ký tự!
                  }
                </ng-template>
              </nz-form-control>
            </nz-form-item>
            <nz-form-item nz-col [nzSpan]="7">
              <nz-form-control [nzErrorTip]="providePriceValidator">
                <nz-input-group [nzPrefix]="prefixTemplateProvidePrice">
                  <input type="number" class="input" nz-input formControlName="providePrice" placeholder="Giá cung:" />
                </nz-input-group>
                <ng-template #prefixTemplateProvidePrice></ng-template>
                <ng-template #providePriceValidator let-control>
                  @if (control.errors?.['required']) {
                  Vui lòng nhập giá cung!
                  }
                  @if (control.errors?.['confirm']) {
                  Giá cung phải lớn hơn 0 và bé hơn 1000000000!
                  }
                </ng-template>
              </nz-form-control>
            </nz-form-item>
          </div>
        </div>
        <div nz-col [nzSpan]="24" class="margin-tb">
          <nz-form-item>
            <nz-form-control [nzSpan]="24" [nzErrorTip]="originValidate">
              <nz-input-group>
                <input type="text" class="input" nz-input formControlName="origin" placeholder="Xuất xứ:" />
              </nz-input-group>
              <ng-template #originValidate let-control>
                @if (control.errors?.['required']) {
                Vui lòng nhập xuất xứ!
                }
                @if (control.errors?.['confirm']) {
                Xuất xứ không được dưới 3 hoặc vượt quá 255 ký tự!
                }
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
        <div nz-row class="margin-tb dflex jct-bw">
          <nz-form-item nz-col [nzSpan]="15">
            <nz-form-control [nzErrorTip]="providerValidate">
              <nz-input-group>
                <input type="text" class="input" nz-input formControlName="provider" placeholder="Nguồn cung:" />
              </nz-input-group>
              <ng-template #providerValidate let-control>
                @if (control.errors?.['required']) {
                Vui lòng nhập nguồn cung!
                }
                @if (control.errors?.['confirm']) {
                Nguồn cung không được dưới 3 hoặc vượt quá 255 ký tự!
                }
              </ng-template>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item nz-col [nzSpan]="8">
            <nz-form-control [nzErrorTip]="originPhoneProvider">
              <nz-input-group>
                <input class="input" type="text" inputmode="decimal" nz-input formControlName="phoneProvider"
                  placeholder="SĐT:" />
              </nz-input-group>
              <ng-template #originPhoneProvider let-control>
                @if (control.errors?.['required']) {
                Vui lòng nhập đúng định dạng số điện thoại!
                }
                @if (control.errors?.['confirm']) {
                Vui lòng nhập đúng định dạng số điện thoại!
                }
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </div>
      </form>
    </div>
    <textarea nz-input [(ngModel)]="product.description" class="description" placeholder="Mô tả:"></textarea>
    <div class="center">
      <button class="button-add-product" (click)="handleAddProduct()">Thêm</button>
    </div>
  </section>
</section>