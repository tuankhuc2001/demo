<cModal [isVisible]="isVisible" (closeModal)="handleCloseModal()" width="90%" [isCentered]="true">
    <Content>
        <div class="content">
            <div nz-row>
                <div nz-col nzSpan="12" class="image-container">
                    <img nz-image width="100%" height="100%"
                        nzSrc="{{ProductDetail.nameProduct}}"
                        alt="No Image or Image is broken" />
                </div>
                <div nz-col nzSpan="12">
                    <div class="productName">{{ProductDetail.nameProduct}}</div>
                    <div class="floorPrice">{{ProductDetail.floorPrice}}</div>
                    <div class="quantityProduct">Tồn kho: {{ProductDetail.quantityProduct}}</div>
                    <form nz-form [formGroup]="validateAddCartForm">
                        <nz-form-item>
                            <nz-form-control [nzErrorTip]="editPriceValidate">
                                <nz-input-group [nzPrefix]="prefixTemplate" style="width: 100%;">
                                    <input type="number" nz-input formControlName="editPrice"
                                        class="responsive-input" />
                                </nz-input-group>
                                <ng-template #prefixTemplate>
                                    <div class="responsive-input">Sửa giá:</div>
                                </ng-template>
                                <ng-template #editPriceValidate let-control>
                                    @if (control.errors?.['required']) {
                                    Vui lòng nhập giá tiền!
                                    }
                                    @if (control.errors?.['confirm']) {
                                    Giá tiền không được nhỏ hơn hoặc lớn hơn giá gốc 10%
                                    }
                                </ng-template>
                            </nz-form-control>
                        </nz-form-item>
                        <nz-form-item>
                            <nz-form-control nzRequired [nzErrorTip]="rateValidator">
                                <nz-input-group [nzPrefix]="prefixTemplateRate" style="width: 100%; padding: 0;">
                                    <input type="number" nz-input formControlName="rate" class="responsive-input" />
                                </nz-input-group>

                                <ng-template #prefixTemplateRate>
                                    <button *ngIf="plus === false" class="minusRate" nz-button (click)="handlePlusRate()">
                                        <span style="color: white;" nz-icon nzType="minus"></span>
                                    </button>
                                    <button *ngIf="plus === true" class="plusRate"  nz-button (click)="handlePlusRate()">
                                        <span style="color: white;" nz-icon nzType="plus"></span>
                                    </button>
                                </ng-template>

                                <ng-template #rateValidator let-control>
                                    @if (control.errors?.['required']) {
                                    Vui lòng nhập giá chênh lệch!
                                    }
                                    @if (control.errors?.['confirm']) {
                                    Vui lòng nhập giá chênh lệch không được nhỏ hơn hoặc lớn hơn 10%
                                    }
                                </ng-template>
                            </nz-form-control>
                        </nz-form-item>
                        <nz-form-item>
                            <nz-form-control [nzErrorTip]="quantityValidate">
                                <nz-input-group [nzPrefix]="prefixTemplateQuantity">
                                    <input type="number" nz-input formControlName="quantity" class="responsive-input" />
                                </nz-input-group>
                                <ng-template #prefixTemplateQuantity>
                                    <div class="responsive-input">
                                        Số lượng:
                                    </div>
                                </ng-template>
                                <ng-template #quantityValidate let-control>
                                    @if (control.errors?.['required']) {
                                    Vui lòng nhập số lượng!
                                    }
                                    @if (control.errors?.['confirm']) {
                                    Vui lòng nhập số lượng lớn hơn hoặc bằng 1!
                                    }
                                </ng-template>
                            </nz-form-control>
                        </nz-form-item>
                    </form>
                </div>
            </div>
            <div *ngIf="enableDescription === true">
                <div class="productName">Mô tả ngắn:</div>
                <div class="descriptionContent">
                    {{ProductDetail.description}}
                </div>
            </div>
            <div nz-row nzJustify="space-between">
                <div nz-col nzSpan="8">
                    <button nz-button class="detailButton" (click)="handleEnableDescription()">
                         {{enableDescription === false ? 'Xem chi tiết' : 'Thu gọn '}}
                         <span *ngIf="enableDescription === false" nz-icon nzType="down" nzTheme="outline"></span>
                         <span *ngIf="enableDescription === true" nz-icon nzType="up" nzTheme="outline"></span>
                    </button>
                </div>
                <div nz-col nzSpan="6">
                    <button nz-button class="cancelButton"> Hủy </button>
                </div>
                <div nz-col nzSpan="6">
                    <button nz-button class="submitButton" [disabled]="validateAddCartForm.invalid" (click)="handleSubmit()">Thêm</button>
                </div>
            </div>
        </div>
    </Content>
</cModal>